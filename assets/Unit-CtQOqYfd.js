class o{constructor(t,e,s,h,i){this.x=t,this.y=e,this.target=s,this.owner=h,this.source=i,this.speed=100,this.active=!0,this.radius=4,this.colors={player:"#00ff9d",enemy:"#ff3333"}}update(t,e){if(!this.active)return;const s=this.target.x-this.x,h=this.target.y-this.y,i=Math.sqrt(s*s+h*h);if(i<5){this.hitTarget(e);return}const r=this.speed*t;this.x+=s/i*r,this.y+=h/i*r}draw(t,e,s){if(s){let h=7;this.owner==="enemy"&&(h=8);const i=this.radius*4;t.drawImage(e,h*64,0,64,64,this.x-i/2,this.y-i/2,i,i)}else t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.fillStyle=this.colors[this.owner],t.fill(),t.fill()}hitTarget(t){if(this.active=!1,this.target.owner===this.owner){if(this.target.value<this.target.capacity)this.target.value++;else if(t){const e=t.connections.filter(s=>s.from===this.target);if(e.length>0){const s=e[Math.floor(Math.random()*e.length)];t.units.push(new this.constructor(this.target.x,this.target.y,s.to,this.owner,this.target))}}}else this.target.value--,this.target.value<=0&&(this.target.owner=this.owner,this.target.value=Math.abs(this.target.value))}}export{o as Unit};
