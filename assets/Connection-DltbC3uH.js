import{_ as d}from"./hacking-745gJ-2I.js";import"./modulepreload-polyfill-B5Qt9EMX.js";class y{constructor(t,i){this.from=t,this.to=i,this.timer=0,this.rate=1}update(t,i){if(this.from.value>=1){this.timer+=t;const o=this.from.generationRate/2;this.timer>=1/o&&(this.timer=0,this.from.value--,d(()=>import("./Unit-Bl5zPYm_.js"),[]).then(e=>{const s=e.Unit;i.units.push(new s(this.from.x,this.from.y,this.to,this.from.owner,this.from))}))}}draw(t,i){if(i.wireSpriteLoaded){const o=this.to.x-this.from.x,e=this.to.y-this.from.y,s=Math.sqrt(o*o+e*e),a=Math.atan2(e,o);t.save(),t.translate(this.from.x,this.from.y),t.rotate(a);const f=performance.now()/1e3*50%64,n=64,r=32,m=Math.ceil(s/n)+1;t.beginPath(),t.rect(0,-r/2,s,r),t.clip();for(let h=-1;h<m;h++)t.drawImage(i.wireSprite,h*n+f,-r/2);t.restore()}else t.beginPath(),t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y),t.strokeStyle="#00ff9d",t.lineWidth=2,t.stroke()}}export{y as Connection};
