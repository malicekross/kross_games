import{_ as w}from"./hacking-xF7G_dCp.js";import"./modulepreload-polyfill-B5Qt9EMX.js";class v{constructor(t,e){this.from=t,this.to=e,this.timer=0,this.rate=1}update(t,e){if(this.from.value>=1){this.timer+=t;const o=this.from.generationRate/2;this.timer>=1/o&&(this.timer=0,this.from.value--,w(()=>import("./Unit-CtQOqYfd.js"),[]).then(r=>{const n=r.Unit;e.units.push(new n(this.from.x,this.from.y,this.to,this.from.owner,this.from))}))}}draw(t,e){if(e.wireSpriteLoaded){const o=this.to.x-this.from.x,r=this.to.y-this.from.y,n=Math.sqrt(o*o+r*r),l=Math.atan2(r,o);t.save(),t.translate(this.from.x,this.from.y),t.rotate(l);const p=performance.now()/1e3*-50%96,h=96,f=32;for(let a=0;;a++){let i=a*h-p,m=h,d=0,s=h;if(!(i+m<0)){if(i<0&&(d=-i,s=m+i,i=0),i+s>n&&(s=n-i),i>=n)break;s>0&&t.drawImage(e.wireSprite,d,0,s,f,i,-f/2,s,f)}}t.restore()}else t.beginPath(),t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y),t.strokeStyle="#00ff9d",t.lineWidth=2,t.stroke()}}export{v as Connection};
